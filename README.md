# OpenClaw Monitor

<p align="center">
  <img src="https://img.shields.io/badge/version-1.0.0-blue.svg" alt="Version">
  <img src="https://img.shields.io/badge/python-3.8+-green.svg" alt="Python">
  <img src="https://img.shields.io/badge/license-MIT-yellow.svg" alt="License">
</p>

<p align="center">
  <b>å¼€æºçš„ OpenClaw AI ä»£ç†ç›‘æ§é¢æ¿</b><br>
  å®æ—¶ç›‘æ§ä»»åŠ¡çŠ¶æ€ã€Token ç”¨é‡ã€æˆæœ¬åˆ†æï¼Œæ”¯æŒå¤šæ¨¡å‹å®šä»·ç®¡ç†
</p>

<p align="center">
  <a href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
  <a href="#å®‰è£…">å®‰è£…</a> â€¢
  <a href="#ä½¿ç”¨è¯´æ˜">ä½¿ç”¨è¯´æ˜</a> â€¢
  <a href="#apiæ–‡æ¡£">API æ–‡æ¡£</a> â€¢
  <a href="#é…ç½®">é…ç½®</a> â€¢
  <a href="#æˆªå›¾">æˆªå›¾</a>
</p>

---

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [å®‰è£…](#å®‰è£…)
- [ä½¿ç”¨è¯´æ˜](#ä½¿ç”¨è¯´æ˜)
- [é…ç½®](#é…ç½®)
- [API æ–‡æ¡£](#apiæ–‡æ¡£)
- [å®‰å…¨](#å®‰å…¨)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [è´¡çŒ®](#è´¡çŒ®)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒç›‘æ§
- ğŸ“Š **å®æ—¶æ¦‚è§ˆ** - Gateway çŠ¶æ€ã€ä»»åŠ¡æ•°ã€Token ç”¨é‡ã€æˆæœ¬ç»Ÿè®¡
- ğŸ“‹ **ä»»åŠ¡ç®¡ç†** - æŸ¥çœ‹è¿è¡Œä¸­ã€å·²å®Œæˆä»»åŠ¡ï¼Œæ”¯æŒä¼šè¯è¿½è¸ª
- âš ï¸ **é”™è¯¯æ—¥å¿—** - èšåˆé”™è¯¯æ—¥å¿—ï¼Œæ”¯æŒ 7 å¤©å†å²æŸ¥è¯¢
- ğŸ–¥ï¸ **ç³»ç»Ÿä¿¡æ¯** - CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œå®æ—¶ç›‘æ§

### å®šä»·ç®¡ç†
- ğŸ’° **å¤šæ¨¡å‹å®šä»·** - æ”¯æŒ Kimiã€GPT-4ã€Claude ç­‰ä¸»æµæ¨¡å‹
- ğŸ’± **è´§å¸åˆ‡æ¢** - æ”¯æŒäººæ°‘å¸(CNY)å’Œç¾å…ƒ(USD)æ˜¾ç¤º
- ğŸ“ˆ **æˆæœ¬åˆ†æ** - æŒ‰æ—¥/å‘¨/æœˆç»Ÿè®¡ Token æˆæœ¬å’Œç”¨é‡è¶‹åŠ¿
- ğŸ”„ **æ±‡ç‡è‡ªåŠ¨æ›´æ–°** - æ”¯æŒæ‰‹åŠ¨æˆ–è‡ªåŠ¨è·å–æœ€æ–°æ±‡ç‡

### å®‰å…¨ç‰¹æ€§
- ğŸ” **åŸºç¡€èº«ä»½éªŒè¯** - HTTP Basic Auth ä¿æŠ¤è®¿é—®
- ğŸ”’ **å®šä»·ä¿®æ”¹ä¿æŠ¤** - æ‰€æœ‰å®šä»·å˜æ›´éœ€è®¤è¯
- ğŸ“ **æ“ä½œå†å²** - è®°å½•æ‰€æœ‰å®šä»·ä¿®æ”¹å†å²

### å…¶ä»–ç‰¹æ€§
- ğŸ“± **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºè®¿é—®
- ğŸŒ™ **æš—è‰²/äº®è‰²ä¸»é¢˜** - ä¸€é”®åˆ‡æ¢
- ğŸ”„ **è‡ªåŠ¨åˆ·æ–°** - æ•°æ®æ¯ 10 ç§’è‡ªåŠ¨æ›´æ–°
- ğŸŒ **å±€åŸŸç½‘è®¿é—®** - æ”¯æŒåŒä¸€ WiFi ä¸‹å¤šè®¾å¤‡è®¿é—®

---

## ğŸ”§ ç¯å¢ƒè¦æ±‚

- **Python**: 3.8+
- **OpenClaw**: å·²å®‰è£…å¹¶é…ç½®
- **æ“ä½œç³»ç»Ÿ**: Linux / macOS / Windows (WSL2)
- **å†…å­˜**: å»ºè®® 2GB+

---

## ğŸš€ å®‰è£…

### æ–¹å¼ä¸€ï¼šä¸€é”®å®‰è£…è„šæœ¬

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/openclaw-monitor.git
cd openclaw-monitor

# è¿è¡Œå®‰è£…è„šæœ¬
chmod +x install.sh
./install.sh
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/yourusername/openclaw-monitor.git
cd openclaw-monitor

# 2. å®‰è£…ä¾èµ–
pip3 install -r requirements.txt --user

# 3. å¯åŠ¨æœåŠ¡
python3 app.py
```

### æ–¹å¼ä¸‰ï¼šDocker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t openclaw-monitor .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name openclaw-monitor \
  -p 8080:8080 \
  -v ~/.openclaw:/root/.openclaw:ro \
  -e MONITOR_USERNAME=admin \
  -e MONITOR_PASSWORD=yourpassword \
  openclaw-monitor
```

---

## ğŸ“– ä½¿ç”¨è¯´æ˜

### å¯åŠ¨æœåŠ¡

```bash
# åŸºç¡€å¯åŠ¨
python3 app.py

# æŒ‡å®šç«¯å£
export PORT=8081
python3 app.py

# è‡ªå®šä¹‰è´¦å·å¯†ç 
export MONITOR_USERNAME=admin
export MONITOR_PASSWORD=yourpassword
python3 app.py
```

### è®¿é—®é¢æ¿

| åœ°å€ | è¯´æ˜ |
|------|------|
| `http://localhost:8080` | æœ¬æœºè®¿é—® |
| `http://192.168.x.x:8080` | å±€åŸŸç½‘å…¶ä»–è®¾å¤‡è®¿é—® |
| `http://127.0.0.1:8080` | WSL2 å†…éƒ¨è®¿é—® |

**é»˜è®¤è´¦å·å¯†ç ï¼š**
- ç”¨æˆ·å: `admin`
- å¯†ç : `2026` (å»ºè®®ä¿®æ”¹)

### é¡µé¢å¯¼èˆª

- **æ¦‚è§ˆ** - æŸ¥çœ‹æ€»ä½“çŠ¶æ€ã€æˆæœ¬ç»Ÿè®¡ã€ç³»ç»Ÿä¿¡æ¯
- **ä»»åŠ¡** - æŸ¥çœ‹è¿è¡Œä¸­å’Œå·²å®Œæˆçš„ä»»åŠ¡
- **æ—¥å¿—** - æŸ¥çœ‹é”™è¯¯æ—¥å¿—å’Œè­¦å‘Š
- **å®šä»·** - ç®¡ç†æ¨¡å‹å®šä»·ã€è´§å¸è®¾ç½®

---

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `MONITOR_USERNAME` | `admin` | ç™»å½•ç”¨æˆ·å |
| `MONITOR_PASSWORD` | `admin123` | ç™»å½•å¯†ç  |
| `PORT` | `8080` | æœåŠ¡ç«¯å£ |
| `HOST` | `0.0.0.0` | ç›‘å¬åœ°å€ |

### å®šä»·é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.openclaw-monitor/pricing.json`

```json
{
  "currency": "CNY",
  "exchange_rate": {
    "USD_TO_CNY": 7.25,
    "CNY_TO_USD": 0.1379,
    "last_updated": "2026-02-23T12:00:00",
    "auto_update": true
  },
  "models": {
    "moonshot/kimi-k2.5": {
      "input_per_1k": 0.0005,
      "output_per_1k": 0.002,
      "currency": "CNY",
      "provider": "Moonshot"
    },
    "gpt-4o": {
      "input_per_1k": 0.005,
      "output_per_1k": 0.015,
      "currency": "USD",
      "provider": "OpenAI"
    }
  }
}
```

### é¢„ç½®æ¨¡å‹å®šä»·

| æ¨¡å‹ | è¾“å…¥ä»·æ ¼/1K | è¾“å‡ºä»·æ ¼/1K | è´§å¸ |
|------|------------|------------|------|
| moonshot/kimi-k2.5 | Â¥0.0005 | Â¥0.002 | CNY |
| moonshot/kimi-k1.5 | Â¥0.0002 | Â¥0.001 | CNY |
| moonshot/kimi-k2 | Â¥0.001 | Â¥0.004 | CNY |
| gpt-4o | $0.005 | $0.015 | USD |
| gpt-4o-mini | $0.00015 | $0.0006 | USD |
| claude-3-opus | $0.015 | $0.075 | USD |
| claude-3-sonnet | $0.003 | $0.015 | USD |
| claude-3-haiku | $0.00025 | $0.00125 | USD |
| deepseek-chat | Â¥0.00014 | Â¥0.00028 | CNY |

---

## ğŸ”Œ API æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯

- **Base URL**: `http://localhost:8080`
- **è®¤è¯æ–¹å¼**: HTTP Basic Auth
- **Content-Type**: `application/json`

### ç«¯ç‚¹åˆ—è¡¨

#### å¥åº·æ£€æŸ¥
```http
GET /api/health
```

**å“åº”ï¼š**
```json
{
  "status": "ok",
  "timestamp": "2026-02-23T12:00:00",
  "version": "1.0.0-secure",
  "secure": true
}
```

#### è·å–æ¦‚è§ˆæ•°æ®
```http
GET /api/summary
```

#### è·å–å®šä»·é…ç½®
```http
GET /api/pricing
```

#### æ›´æ–°æ¨¡å‹å®šä»·
```http
POST /api/pricing
Content-Type: application/json

{
  "model": "moonshot/kimi-k2.5",
  "input_per_1k": 0.0005,
  "output_per_1k": 0.002,
  "currency": "CNY",
  "provider": "Moonshot",
  "reason": "ä¾›åº”å•†è°ƒä»·"
}
```

#### è®¡ç®—æˆæœ¬
```http
POST /api/pricing/calculate
Content-Type: application/json

{
  "model": "moonshot/kimi-k2.5",
  "input_tokens": 1000,
  "output_tokens": 500
}
```

**å“åº”ï¼š**
```json
{
  "input_cost": 0.0005,
  "output_cost": 0.001,
  "total_cost": 0.0015,
  "currency": "CNY"
}
```

#### è·å–ä»»åŠ¡åˆ—è¡¨
```http
GET /api/tasks
```

#### è·å–é”™è¯¯æ—¥å¿—
```http
GET /api/logs?days=7
```

#### è·å–ç³»ç»Ÿä¿¡æ¯
```http
GET /api/system
```

---

## ğŸ”’ å®‰å…¨

### è®¿é—®æ§åˆ¶

é»˜è®¤å¯ç”¨ HTTP Basic Authï¼Œæ‰€æœ‰ API å’Œé¡µé¢éƒ½éœ€è¦è®¤è¯ã€‚

### ä¿®æ”¹å¯†ç 

```bash
export MONITOR_USERNAME=yourname
export MONITOR_PASSWORD=yourpassword
python3 app.py
```

### é˜²ç«å¢™é…ç½®

å»ºè®®é™åˆ¶åªæœ‰å±€åŸŸç½‘å¯è®¿é—®ï¼š

```bash
# Linux (iptables)
iptables -A INPUT -p tcp --dport 8080 -s 192.168.0.0/16 -j ACCEPT
iptables -A INPUT -p tcp --dport 8080 -j DROP

# Windows
netsh advfirewall firewall add rule name="OpenClaw Monitor" dir=in action=allow protocol=tcp localport=8080 remoteip=192.168.0.0/16
```

### HTTPS éƒ¨ç½²

æ¨èä½¿ç”¨åå‘ä»£ç†ï¼ˆNginx/Caddyï¼‰å¯ç”¨ HTTPSï¼š

```nginx
server {
    listen 443 ssl;
    server_name monitor.yourdomain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## ğŸ“¸ æˆªå›¾

### æ¦‚è§ˆé¡µé¢
æ¦‚è§ˆé¡µé¢å±•ç¤º Gateway çŠ¶æ€ã€ä»»åŠ¡ç»Ÿè®¡ã€Token ç”¨é‡å’Œæˆæœ¬åˆ†æã€‚

### å®šä»·ç®¡ç†
æ”¯æŒå¤šæ¨¡å‹å®šä»·é…ç½®ã€è´§å¸åˆ‡æ¢ã€æ±‡ç‡è®¾ç½®ã€‚

### ç§»åŠ¨ç«¯é€‚é…
å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ‰‹æœºæµè§ˆå™¨è®¿é—®ã€‚

---

## â“ å¸¸è§é—®é¢˜

### Q: Mac/æ‰‹æœºæ— æ³•è®¿é—®é¢æ¿ï¼Ÿ

A: WSL2 éœ€è¦è®¾ç½®ç«¯å£è½¬å‘ï¼š

```powershell
# åœ¨ Windows PowerShell (ç®¡ç†å‘˜) ä¸­æ‰§è¡Œ
netsh interface portproxy add v4tov4 listenport=8080 listenaddress=0.0.0.0 connectport=8080 connectaddress=172.25.x.x
netsh advfirewall firewall add rule name="OpenClaw Monitor" dir=in action=allow protocol=tcp localport=8080
```

### Q: å¦‚ä½•ä¿®æ”¹ç›‘å¬ç«¯å£ï¼Ÿ

A: ä¿®æ”¹ `app.py` ä¸­çš„ `PORT` å˜é‡ï¼Œæˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```bash
export PORT=8081
python3 app.py
```

### Q: æˆæœ¬è®¡ç®—ä¸å‡†ç¡®ï¼Ÿ

A: ç¡®ä¿åœ¨"å®šä»·"é¡µé¢æ­£ç¡®è®¾ç½®äº†æ¨¡å‹ä»·æ ¼ã€‚æˆæœ¬æŒ‰ 60% input / 40% output ä¼°ç®—ã€‚

### Q: å¦‚ä½•å¤‡ä»½é…ç½®ï¼Ÿ

A: å®šä»·é…ç½®ä¿å­˜åœ¨ `~/.openclaw-monitor/pricing.json`ï¼Œç›´æ¥å¤åˆ¶å¤‡ä»½å³å¯ã€‚

### Q: æ”¯æŒå¤šç”¨æˆ·å—ï¼Ÿ

A: å½“å‰ç‰ˆæœ¬ä»…æ”¯æŒå•ç”¨æˆ·åŸºç¡€è®¤è¯ã€‚å¦‚éœ€å¤šç”¨æˆ·ï¼Œå»ºè®®é…åˆåå‘ä»£ç†çš„è®¤è¯åŠŸèƒ½ã€‚

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘ç¯å¢ƒæ­å»º

```bash
# 1. Fork å¹¶å…‹éš†ä»“åº“
git clone https://github.com/yourusername/openclaw-monitor.git
cd openclaw-monitor

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# 3. å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install -r requirements-dev.txt

# 4. è¿è¡Œå¼€å‘æœåŠ¡å™¨
export FLASK_ENV=development
python3 app.py
```

### æäº¤è§„èŒƒ

- ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/)
- ç¡®ä¿ä»£ç é€šè¿‡ `flake8` æ£€æŸ¥
- æ›´æ–°ç›¸å…³æ–‡æ¡£

---

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE) Â© 2026 OpenClaw Monitor Contributors

---

## ğŸ™ è‡´è°¢

- [OpenClaw](https://github.com/openclaw/openclaw) - ä¼˜ç§€çš„ AI ä»£ç†æ¡†æ¶
- [Flask](https://flask.palletsprojects.com/) - è½»é‡çº§ Web æ¡†æ¶
- [Chart.js](https://www.chartjs.org/) - å›¾è¡¨åº“

---

<p align="center">
  Made with â¤ï¸ for OpenClaw Community
</p>
